<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Book detail</title>
</head>
<body>
<h1>{{ book.title }}</h1>

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<h2>Authors</h2>
<ul>
{% for author in book.author_set.all %}
    <li>{{ author.name }}</li>
{% endfor %}
</ul>

<h2>Ratings</h2>

<ul>
{% for rating in book.rating_set.all %}
<li>{{ rating.get_source_display }} ---- {{ rating.avg_rating|floatformat:-1 }}/5 ---- {{ rating.nb_ratings }} rating{{ rating.nb_ratings|pluralize }}</li>
{% endfor %}
</ul>

<form action="{% url 'ebook-manager:rate' book.book_id %}" method="post">
    {% csrf_token %}
    <input type="number" name="rating" id="id_rating" min="1" max="5">
    <label for="id_rating">Rating (Personal)</label><br>
    <input type="submit" value="Rate">
</form>
</body>
</html>